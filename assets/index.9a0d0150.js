import*as e from"https://unpkg.com/three@0.120.1/build/three.module.js";import{Loader as t,LoaderUtils as n,FileLoader as s,Color as o,SpotLight as r,PointLight as i,DirectionalLight as a,MeshBasicMaterial as l,MeshPhysicalMaterial as c,Vector2 as u,TangentSpaceNormalMap as d,ImageBitmapLoader as h,TextureLoader as p,InterleavedBuffer as m,InterleavedBufferAttribute as f,BufferAttribute as g,RGBFormat as w,LinearFilter as x,LinearMipmapLinearFilter as T,RepeatWrapping as y,PointsMaterial as v,Material as R,LineBasicMaterial as M,MeshStandardMaterial as S,DoubleSide as A,sRGBEncoding as E,PropertyBinding as _,BufferGeometry as b,SkinnedMesh as L,Mesh as P,LineSegments as I,Line as O,LineLoop as N,Points as C,Group as H,PerspectiveCamera as U,MathUtils as F,OrthographicCamera as k,InterpolateLinear as D,AnimationClip as G,Bone as j,Object3D as B,Matrix4 as K,Skeleton as V,TriangleFanDrawMode as W,Interpolant as X,NearestFilter as q,NearestMipmapNearestFilter as z,LinearMipmapNearestFilter as Y,NearestMipmapLinearFilter as Q,ClampToEdgeWrapping as Z,MirroredRepeatWrapping as J,InterpolateDiscrete as ee,FrontSide as te,CanvasTexture as ne,TriangleStripDrawMode as se,VectorKeyframeTrack as oe,QuaternionKeyframeTrack as re,NumberKeyframeTrack as ie,Box3 as ae,Vector3 as le,Sphere as ce}from"https://unpkg.com/three@0.120.1/build/three.module.js";function ue(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const de={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class he{constructor(e){this.parser=e,this.name=de.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const l=t.json,c=((l.extensions&&l.extensions[this.name]||{}).lights||[])[e];let u;const d=new o(16777215);void 0!==c.color&&d.fromArray(c.color);const h=void 0!==c.range?c.range:0;switch(c.type){case"directional":u=new a(d),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new i(d),u.distance=h;break;case"spot":u=new r(d),u.distance=h,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,u.angle=c.spot.outerConeAngle,u.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return u.position.set(0,0,0),u.decay=2,void 0!==c.intensity&&(u.intensity=c.intensity),u.name=t.createUniqueName(c.name||"light_"+e),s=Promise.resolve(u),t.cache.add(n,s),s}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===o?null:this._loadLight(o).then((function(e){return n._getNodeRef(t.cache,o,e)}))}}class pe{constructor(){this.name=de.KHR_MATERIALS_UNLIT}getMaterialType(){return l}extendParams(e,t,n){const s=[];e.color=new o(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==r.baseColorTexture&&s.push(n.assignTexture(e,"map",r.baseColorTexture))}return Promise.all(s)}}class me{constructor(e){this.parser=e,this.name=de.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?c:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],r=s.extensions[this.name];if(void 0!==r.clearcoatFactor&&(t.clearcoat=r.clearcoatFactor),void 0!==r.clearcoatTexture&&o.push(n.assignTexture(t,"clearcoatMap",r.clearcoatTexture)),void 0!==r.clearcoatRoughnessFactor&&(t.clearcoatRoughness=r.clearcoatRoughnessFactor),void 0!==r.clearcoatRoughnessTexture&&o.push(n.assignTexture(t,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),void 0!==r.clearcoatNormalTexture&&(o.push(n.assignTexture(t,"clearcoatNormalMap",r.clearcoatNormalTexture)),void 0!==r.clearcoatNormalTexture.scale)){const e=r.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new u(e,-e)}return Promise.all(o)}}class fe{constructor(e){this.parser=e,this.name=de.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?c:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],r=s.extensions[this.name];return void 0!==r.transmissionFactor&&(t.transmission=r.transmissionFactor),void 0!==r.transmissionTexture&&o.push(n.assignTexture(t,"transmissionMap",r.transmissionTexture)),Promise.all(o)}}class ge{constructor(e){this.parser=e,this.name=de.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],r=n.images[o.source],i=t.options.ktx2Loader;if(!i){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r,i)}}class we{constructor(e){this.parser=e,this.name=de.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const r=o.extensions[t],i=s.images[r.source];let a=n.textureLoader;if(i.uri){const e=n.options.manager.getHandler(i.uri);null!==e&&(a=e)}return this.detectSupport().then((function(o){if(o)return n.loadTextureImage(e,i,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class xe{constructor(e){this.name=de.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],s=this.parser.getDependency("buffer",e.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then((function(t){const n=e.byteOffset||0,s=e.byteLength||0,r=e.count,i=e.byteStride,a=new ArrayBuffer(r*i),l=new Uint8Array(t[0],n,s);return o.decodeGltfBuffer(new Uint8Array(a),r,i,l,e.mode,e.filter),a}))}return null}}const Te="glTF",ye=1313821514,ve=5130562;class Re{constructor(e){this.name=de.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:n.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Te)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-12,o=new DataView(e,12);let r=0;for(;r<s;){const t=o.getUint32(r,!0);r+=4;const s=o.getUint32(r,!0);if(r+=4,s===ye){const s=new Uint8Array(e,12+r,t);this.content=n.decodeText(s)}else if(s===ve){const n=12+r;this.body=e.slice(n,n+t)}r+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Me{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=de.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,o=e.extensions[this.name].bufferView,r=e.extensions[this.name].attributes,i={},a={},l={};for(const c in r){const e=Ge[c]||c.toLowerCase();i[e]=r[c]}for(const c in e.attributes){const t=Ge[c]||c.toLowerCase();if(void 0!==r[c]){const s=n.accessors[e.attributes[c]],o=Ue[s.componentType];l[t]=o,a[t]=!0===s.normalized}}return t.getDependency("bufferView",o).then((function(e){return new Promise((function(t){s.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],s=a[t];void 0!==s&&(n.normalized=s)}t(e)}),i,l)}))}))}}class Se{constructor(){this.name=de.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e}}class Ae extends S{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),s=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),i=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new o).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(e){for(const t in a)e.uniforms[t]=a[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",s).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",i)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(e){a.specular.value=e}},specularMap:{get:function(){return a.specularMap.value},set:function(e){a.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(e){a.glossiness.value=e}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(e){a.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Ee{constructor(){this.name=de.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return Ae}extendParams(e,t,n){const s=t.extensions[this.name];e.color=new o(1,1,1),e.opacity=1;const r=[];if(Array.isArray(s.diffuseFactor)){const t=s.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==s.diffuseTexture&&r.push(n.assignTexture(e,"map",s.diffuseTexture)),e.emissive=new o(0,0,0),e.glossiness=void 0!==s.glossinessFactor?s.glossinessFactor:1,e.specular=new o(1,1,1),Array.isArray(s.specularFactor)&&e.specular.fromArray(s.specularFactor),void 0!==s.specularGlossinessTexture){const t=s.specularGlossinessTexture;r.push(n.assignTexture(e,"glossinessMap",t)),r.push(n.assignTexture(e,"specularMap",t))}return Promise.all(r)}createMaterial(e){const t=new Ae(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=d,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class _e{constructor(){this.name=de.KHR_MESH_QUANTIZATION}}class be extends X{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,o=e*s*3+s;for(let r=0;r!==s;r++)t[r]=n[o+r];return t}}be.prototype.beforeStart_=be.prototype.copySampleValue_,be.prototype.afterEnd_=be.prototype.copySampleValue_,be.prototype.interpolate_=function(e,t,n,s){const o=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=2*i,l=3*i,c=s-t,u=(n-t)/c,d=u*u,h=d*u,p=e*l,m=p-l,f=-2*h+3*d,g=h-d,w=1-f,x=g-d+u;for(let T=0;T!==i;T++){const e=r[m+T+i],t=r[m+T+a]*c,n=r[p+T+i],s=r[p+T]*c;o[T]=w*e+x*t+f*n+g*s}return o};const Le=0,Pe=1,Ie=2,Oe=3,Ne=4,Ce=5,He=6,Ue={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Fe={9728:q,9729:x,9984:z,9985:Y,9986:Q,9987:T},ke={33071:Z,33648:J,10497:y},De={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ge={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},je={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Be={CUBICSPLINE:void 0,LINEAR:D,STEP:ee},Ke="OPAQUE",Ve="MASK",We="BLEND";function Xe(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function qe(e,t,n){for(const s in n.extensions)void 0===e[s]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=n.extensions[s])}function ze(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Ye(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,s=t.weights.length;n<s;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,s=n.length;t<s;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Qe(e){const t=e.extensions&&e.extensions[de.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+Ze(t.attributes):e.indices+":"+Ze(e.attributes)+":"+e.mode,n}function Ze(e){let t="";const n=Object.keys(e).sort();for(let s=0,o=n.length;s<o;s++)t+=n[s]+":"+e[n[s]]+";";return t}function Je(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class $e{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ue,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new h(this.options.manager):this.textureLoader=new p(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new s(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,o=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const r={scene:t[0][s.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:s.asset,parser:n,userData:{}};qe(o,r,s),ze(r,s),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(r)}))).then((function(){e(r)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,o=t.length;s<o;s++){const n=t[s].joints;for(let t=0,s=n.length;t<s;t++)e[n[t]].isBone=!0}for(let s=0,o=e.length;s<o;s++){const t=e[s];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone();return s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const o=e(t[s]);o&&n.push(o)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this.loadNode(t);break;case"mesh":s=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":s=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":s=this.loadSkin(t);break;case"animation":s=this.loadAnimation(t);break;case"camera":s=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(s.map((function(t,s){return n.getDependency(e,s)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[de.KHR_BINARY_GLTF].body);const s=this.options;return new Promise((function(e,o){n.load(Xe(t.uri,s.path),e,void 0,(function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,s=t.byteOffset||0;return e.slice(s,s+n)}))}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(void 0===s.bufferView&&void 0===s.sparse)return Promise.resolve(null);const o=[];return void 0!==s.bufferView?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),void 0!==s.sparse&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then((function(e){const o=e[0],r=De[s.type],i=Ue[s.componentType],a=i.BYTES_PER_ELEMENT,l=a*r,c=s.byteOffset||0,u=void 0!==s.bufferView?n.bufferViews[s.bufferView].byteStride:void 0,d=!0===s.normalized;let h,p;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+e+":"+s.count;let l=t.cache.get(n);l||(h=new i(o,e*u,s.count*u/a),l=new m(h,u/a),t.cache.add(n,l)),p=new f(l,r,c%u/a,d)}else h=null===o?new i(s.count*r):new i(o,c,s.count*r),p=new g(h,r,d);if(void 0!==s.sparse){const t=De.SCALAR,n=Ue[s.sparse.indices.componentType],a=s.sparse.indices.byteOffset||0,l=s.sparse.values.byteOffset||0,c=new n(e[1],a,s.sparse.count*t),u=new i(e[2],l,s.sparse.count*r);null!==o&&(p=new g(p.array.slice(),p.itemSize,p.normalized));for(let e=0,s=c.length;e<s;e++){const t=c[e];if(p.setX(t,u[e*r]),r>=2&&p.setY(t,u[e*r+1]),r>=3&&p.setZ(t,u[e*r+2]),r>=4&&p.setW(t,u[e*r+3]),r>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e],o=t.images[s.source];let r=this.textureLoader;if(o.uri){const e=n.manager.getHandler(o.uri);null!==e&&(r=e)}return this.loadTextureImage(e,o,r)}loadTextureImage(e,t,n){const s=this,o=this.json,r=this.options,i=o.textures[e],a=self.URL||self.webkitURL;let l=t.uri,c=!1,u=!0;if("image/jpeg"===t.mimeType&&(u=!1),void 0!==t.bufferView)l=s.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){const t=new DataView(e,25,1).getUint8(0,!1);u=6===t||4===t||3===t}c=!0;const n=new Blob([e],{type:t.mimeType});return l=a.createObjectURL(n),l}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");return Promise.resolve(l).then((function(e){return new Promise((function(t,s){let o=t;!0===n.isImageBitmapLoader&&(o=function(e){t(new ne(e))}),n.load(Xe(e,r.path),o,void 0,s)}))})).then((function(t){!0===c&&a.revokeObjectURL(l),t.flipY=!1,i.name&&(t.name=i.name),u||(t.format=w);const n=(o.samplers||{})[i.sampler]||{};return t.magFilter=Fe[n.magFilter]||x,t.minFilter=Fe[n.minFilter]||T,t.wrapS=ke[n.wrapS]||y,t.wrapT=ke[n.wrapT]||y,s.associations.set(t,{type:"textures",index:e}),t}))}assignTexture(e,t,n){const s=this;return this.getDependency("texture",n.index).then((function(o){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),s.extensions[de.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[de.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=s.associations.get(o);o=s.extensions[de.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),s.associations.set(o,t)}}e[t]=o}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=void 0!==t.attributes.tangent,o=void 0!==t.attributes.color,r=void 0===t.attributes.normal,i=!0===e.isSkinnedMesh,a=Object.keys(t.morphAttributes).length>0,l=a&&void 0!==t.morphAttributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new v,R.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new M,R.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(s||o||r||i||a){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),i&&(e+="skinning:"),s&&(e+="vertex-tangents:"),o&&(e+="vertex-colors:"),r&&(e+="flat-shading:"),a&&(e+="morph-targets:"),l&&(e+="morph-normals:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.skinning=!0),o&&(t.vertexColors=!0),r&&(t.flatShading=!0),a&&(t.morphTargets=!0),l&&(t.morphNormals=!0),s&&(t.vertexTangents=!0,t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return S}loadMaterial(e){const t=this,n=this.json,s=this.extensions,r=n.materials[e];let i;const a={},c=r.extensions||{},d=[];if(c[de.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=s[de.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];i=e.getMaterialType(),d.push(e.extendParams(a,r,t))}else if(c[de.KHR_MATERIALS_UNLIT]){const e=s[de.KHR_MATERIALS_UNLIT];i=e.getMaterialType(),d.push(e.extendParams(a,r,t))}else{const n=r.pbrMetallicRoughness||{};if(a.color=new o(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.fromArray(e),a.opacity=e[3]}void 0!==n.baseColorTexture&&d.push(t.assignTexture(a,"map",n.baseColorTexture)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(d.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),d.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),i=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),d.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===r.doubleSided&&(a.side=A);const h=r.alphaMode||Ke;return h===We?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===Ve&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&i!==l&&(d.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new u(1,-1),void 0!==r.normalTexture.scale&&a.normalScale.set(r.normalTexture.scale,-r.normalTexture.scale)),void 0!==r.occlusionTexture&&i!==l&&(d.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&i!==l&&(a.emissive=(new o).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&i!==l&&d.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture)),Promise.all(d).then((function(){let n;return n=i===Ae?s[de.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new i(a),r.name&&(n.name=r.name),n.map&&(n.map.encoding=E),n.emissiveMap&&(n.emissiveMap.encoding=E),ze(n,r),t.associations.set(n,{type:"materials",index:e}),r.extensions&&qe(s,n,r),n}))}createUniqueName(e){const t=_.sanitizeNodeName(e||"");let n=t;for(let s=1;this.nodeNamesUsed[n];++s)n=t+"_"+s;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function o(e){return n[de.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return tt(n,e,t)}))}const r=[];for(let i=0,a=e.length;i<a;i++){const n=e[i],a=Qe(n),l=s[a];if(l)r.push(l.promise);else{let e;e=n.extensions&&n.extensions[de.KHR_DRACO_MESH_COMPRESSION]?o(n):tt(new b,n,t),s[a]={primitive:n,promise:e},r.push(e)}}return Promise.all(r)}loadMesh(e){const t=this,n=this.json,s=this.extensions,o=n.meshes[e],r=o.primitives,i=[];for(let l=0,c=r.length;l<c;l++){const e=void 0===r[l].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new S({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:te})),a.DefaultMaterial):this.getDependency("material",r[l].material);i.push(e)}var a;return i.push(t.loadGeometries(r)),Promise.all(i).then((function(n){const i=n.slice(0,n.length-1),a=n[n.length-1],l=[];for(let u=0,d=a.length;u<d;u++){const n=a[u],c=r[u];let d;const h=i[u];if(c.mode===Ne||c.mode===Ce||c.mode===He||void 0===c.mode)d=!0===o.isSkinnedMesh?new L(n,h):new P(n,h),!0!==d.isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),c.mode===Ce?d.geometry=nt(d.geometry,se):c.mode===He&&(d.geometry=nt(d.geometry,W));else if(c.mode===Pe)d=new I(n,h);else if(c.mode===Oe)d=new O(n,h);else if(c.mode===Ie)d=new N(n,h);else{if(c.mode!==Le)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);d=new C(n,h)}Object.keys(d.geometry.morphAttributes).length>0&&Ye(d,o),d.name=t.createUniqueName(o.name||"mesh_"+e),ze(d,o),c.extensions&&qe(s,d,c),t.assignFinalMaterial(d),l.push(d)}if(1===l.length)return l[0];const c=new H;for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(s)return"perspective"===n.type?t=new U(F.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===n.type&&(t=new k(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ze(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],s=[],o=[],r=[],i=[];for(let a=0,l=t.channels.length;a<l;a++){const e=t.channels[a],l=t.samplers[e.sampler],c=e.target,u=void 0!==c.node?c.node:c.id,d=void 0!==t.parameters?t.parameters[l.input]:l.input,h=void 0!==t.parameters?t.parameters[l.output]:l.output;n.push(this.getDependency("node",u)),s.push(this.getDependency("accessor",d)),o.push(this.getDependency("accessor",h)),r.push(l),i.push(c)}return Promise.all([Promise.all(n),Promise.all(s),Promise.all(o),Promise.all(r),Promise.all(i)]).then((function(n){const s=n[0],o=n[1],r=n[2],i=n[3],a=n[4],l=[];for(let e=0,t=s.length;e<t;e++){const t=s[e],n=o[e],c=r[e],u=i[e],d=a[e];if(void 0===t)continue;let h;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,je[d.path]){case je.weights:h=ie;break;case je.rotation:h=re;break;case je.position:case je.scale:default:h=oe}const p=t.name?t.name:t.uuid,m=void 0!==u.interpolation?Be[u.interpolation]:D,f=[];je[d.path]===je.weights?t.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&f.push(e.name?e.name:e.uuid)})):f.push(p);let g=c.array;if(c.normalized){const e=Je(g.constructor),t=new Float32Array(g.length);for(let n=0,s=g.length;n<s;n++)t[n]=g[n]*e;g=t}for(let e=0,s=f.length;e<s;e++){const t=new h(f[e]+"."+je[d.path],n.array,g,m);"CUBICSPLINE"===u.interpolation&&(t.createInterpolant=function(e){return new be(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(t)}}const c=t.name?t.name:"animation_"+e;return new G(c,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return void 0===s.mesh?null:n.getDependency("mesh",s.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,s.mesh,e);return void 0!==s.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=s.weights.length;t<n;t++)e.morphTargetInfluences[t]=s.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,s=this,o=t.nodes[e],r=o.name?s.createUniqueName(o.name):"";return function(){const t=[],n=s._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==o.camera&&t.push(s.getDependency("camera",o.camera).then((function(e){return s._getNodeRef(s.cameraCache,o.camera,e)}))),s._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let i;if(i=!0===o.isBone?new j:t.length>1?new H:1===t.length?t[0]:new B,i!==t[0])for(let e=0,n=t.length;e<n;e++)i.add(t[e]);if(o.name&&(i.userData.name=o.name,i.name=r),ze(i,o),o.extensions&&qe(n,i,o),void 0!==o.matrix){const e=new K;e.fromArray(o.matrix),i.applyMatrix4(e)}else void 0!==o.translation&&i.position.fromArray(o.translation),void 0!==o.rotation&&i.quaternion.fromArray(o.rotation),void 0!==o.scale&&i.scale.fromArray(o.scale);return s.associations.set(i,{type:"nodes",index:e}),i}))}loadScene(e){const t=this.json,n=this.extensions,s=this.json.scenes[e],o=this,r=new H;s.name&&(r.name=o.createUniqueName(s.name)),ze(r,s),s.extensions&&qe(n,r,s);const i=s.nodes||[],a=[];for(let l=0,c=i.length;l<c;l++)a.push(et(i[l],r,t,o));return Promise.all(a).then((function(){return r}))}}function et(e,t,n,s){const o=n.nodes[e];return s.getDependency("node",e).then((function(e){if(void 0===o.skin)return e;let t;return s.getDependency("skin",o.skin).then((function(e){t=e;const n=[];for(let o=0,r=t.joints.length;o<r;o++)n.push(s.getDependency("node",t.joints[o]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const s=[],o=[];for(let r=0,i=n.length;r<i;r++){const e=n[r];if(e){s.push(e);const n=new K;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*r),o.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[r])}e.bind(new V(s,o),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const r=[];if(o.children){const t=o.children;for(let o=0,i=t.length;o<i;o++){const i=t[o];r.push(et(i,e,n,s))}}return Promise.all(r)}))}function tt(e,t,n){const s=t.attributes,o=[];function r(t,s){return n.getDependency("accessor",t).then((function(t){e.setAttribute(s,t)}))}for(const i in s){const t=Ge[i]||i.toLowerCase();t in e.attributes||o.push(r(s[i],t))}if(void 0!==t.indices&&!e.index){const s=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(s)}return ze(e,t),function(e,t,n){const s=t.attributes,o=new ae;if(void 0===s.POSITION)return;{const e=n.json.accessors[s.POSITION],t=e.min,r=e.max;if(void 0===t||void 0===r)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(o.set(new le(t[0],t[1],t[2]),new le(r[0],r[1],r[2])),e.normalized){const t=Je(Ue[e.componentType]);o.min.multiplyScalar(t),o.max.multiplyScalar(t)}}const r=t.targets;if(void 0!==r){const e=new le,t=new le;for(let s=0,o=r.length;s<o;s++){const o=r[s];if(void 0!==o.POSITION){const s=n.json.accessors[o.POSITION],r=s.min,i=s.max;if(void 0!==r&&void 0!==i){if(t.setX(Math.max(Math.abs(r[0]),Math.abs(i[0]))),t.setY(Math.max(Math.abs(r[1]),Math.abs(i[1]))),t.setZ(Math.max(Math.abs(r[2]),Math.abs(i[2]))),s.normalized){const e=Je(Ue[s.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(e)}e.boundingBox=o;const i=new ce;o.getCenter(i.center),i.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=i}(e,t,n),Promise.all(o).then((function(){return void 0!==t.targets?function(e,t,n){let s=!1,o=!1;for(let a=0,l=t.length;a<l;a++){const e=t[a];if(void 0!==e.POSITION&&(s=!0),void 0!==e.NORMAL&&(o=!0),s&&o)break}if(!s&&!o)return Promise.resolve(e);const r=[],i=[];for(let a=0,l=t.length;a<l;a++){const l=t[a];if(s){const t=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):e.attributes.position;r.push(t)}if(o){const t=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):e.attributes.normal;i.push(t)}}return Promise.all([Promise.all(r),Promise.all(i)]).then((function(t){const n=t[0],r=t[1];return s&&(e.morphAttributes.position=n),o&&(e.morphAttributes.normal=r),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function nt(e,t){let n=e.getIndex();if(null===n){const t=[],s=e.getAttribute("position");if(void 0===s)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<s.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const s=n.count-2,o=[];if(t===W)for(let i=1;i<=s;i++)o.push(n.getX(0)),o.push(n.getX(i)),o.push(n.getX(i+1));else for(let i=0;i<s;i++)i%2==0?(o.push(n.getX(i)),o.push(n.getX(i+1)),o.push(n.getX(i+2))):(o.push(n.getX(i+2)),o.push(n.getX(i+1)),o.push(n.getX(i)));o.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=e.clone();return r.setIndex(o),r}let st=document.querySelectorAll(".slide"),ot=document.querySelectorAll(".arrow-left"),rt=document.querySelectorAll(".arrow-right"),it=document.querySelectorAll(".dropdownsection"),at=[],lt=!1,ct=!1;window.innerWidth<1300&&(ct=!0);let ut=0;console.log("help");let dt=null;function ht(){for(let e=0;e<dt.length;e++)dt[e].style.display="none"}var pt=function(e){dt=Array.from(st).filter((function(t){return t.dataset.num==e})),void 0===at[e]&&(at[e]=0),0===at[e]&&(at[e]=dt.length),function(e){ht(),dt[at[e]-1].style.display="block",at[e]--}(e)},mt=function(e){dt=Array.from(st).filter((function(t){return t.dataset.num==e})),void 0===at[e]&&(at[e]=0),at[e]===dt.length-1&&(at[e]=-1),function(e){ht(),dt[at[e]+1].style.display="block",at[e]++}(e)};ot.forEach((function(e){e.addEventListener("click",(function(){pt(e.dataset.num)}))})),rt.forEach((function(e){e.addEventListener("click",(function(){mt(e.dataset.num)}))})),it.forEach((function(e){e.addEventListener("click",(function(){var t;t=e.dataset.id,document.querySelectorAll("."+t).forEach((function(e){e.className.includes("collapsibleIcon")?"-"==e.innerText?e.innerText="+":e.innerText="-":"none"!=e.style.display?e.style.display="none":e.className.includes("slidePic")?e.style.display="flex":e.style.display="block"}))}))})),st.forEach((e=>{dt=Array.from(st).filter((function(t){return t.dataset.num==e.dataset.num})),ht(),dt[0].style.display="block"}));const ft=document.getElementById("toggleButton"),gt=document.getElementById("navi-list");ft.addEventListener("click",(()=>{gt.classList.toggle("active")}));const wt=new e.Scene;let xt;(new class extends t{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new me(e)})),this.register((function(e){return new ge(e)})),this.register((function(e){return new we(e)})),this.register((function(e){return new fe(e)})),this.register((function(e){return new he(e)})),this.register((function(e){return new xe(e)}))}load(e,t,o,r){const i=this;let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:n.extractUrlBase(e),this.manager.itemStart(e);const l=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},c=new s(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,(function(n){try{i.parse(n,a,(function(n){t(n),i.manager.itemEnd(e)}),l)}catch(s){l(s)}}),o,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,s,o){let r;const i={},a={};if("string"==typeof e)r=e;else{if(n.decodeText(new Uint8Array(e,0,4))===Te){try{i[de.KHR_BINARY_GLTF]=new Re(e)}catch(u){return void(o&&o(u))}r=i[de.KHR_BINARY_GLTF].content}else r=n.decodeText(new Uint8Array(e))}const l=JSON.parse(r);if(void 0===l.asset||l.asset.version[0]<2)return void(o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new $e(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let n=0;n<this.pluginCallbacks.length;n++){const e=this.pluginCallbacks[n](c);a[e.name]=e,i[e.name]=!0}if(l.extensionsUsed)for(let n=0;n<l.extensionsUsed.length;++n){const e=l.extensionsUsed[n],t=l.extensionsRequired||[];switch(e){case de.KHR_MATERIALS_UNLIT:i[e]=new pe;break;case de.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:i[e]=new Ee;break;case de.KHR_DRACO_MESH_COMPRESSION:i[e]=new Me(l,this.dracoLoader);break;case de.KHR_TEXTURE_TRANSFORM:i[e]=new Se;break;case de.KHR_MESH_QUANTIZATION:i[e]=new _e;break;default:t.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}c.setExtensions(i),c.setPlugins(a),c.parse(s,o)}}).load("Crystal.glb",(function(e){const t=e.scene;xt=t}),void 0,(function(e){console.error(e)}));const Tt=new e.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3),yt=new e.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3),vt=new e.WebGLRenderer({canvas:document.querySelector("#bg")});var Rt=window.matchMedia("only screen and (max-width: 760px)").matches;vt.setPixelRatio(window.devicePixelRatio),vt.setSize(window.innerWidth,window.innerHeight),wt.background=new e.Color(1908513),Tt.position.setZ(44),Tt.position.setY(-10),Tt.position.setX(20),yt.position.setZ(44),yt.position.setY(-10),yt.position.setX(20),vt.render(wt,Tt);const Mt=new e.TorusGeometry(5.25,.035,3,3),St=new e.TorusGeometry(5.25/1.55,.0245,3,3),At=new e.MeshStandardMaterial({color:11073961}),Et=new e.MeshStandardMaterial({color:7009008}),_t=new e.Mesh(Mt,At),bt=new e.Mesh(St,Et);_t.position.set(1e4,999e5,1);const Lt=new e.PointLight(16777215);Lt.position.set(5,5,5);const Pt=new e.AmbientLight(16777215);function It(){window.innerWidth<1300&&!ct?(ct=!0,window.location.href="index2.html"):window.innerWidth>=1300&&ct&&(ct=!1,window.location.href="index.html"),Tt.aspect=window.innerWidth/window.screen.availHeight,Tt.updateProjectionMatrix(),Tt.position.setZ(44),yt.fov=45,yt.aspect=window.innerWidth/window.innerHeight,yt.updateProjectionMatrix(),vt.setSize(window.innerWidth,window.innerHeight),Dt()}wt.add(Lt,Pt),window.addEventListener("load",(function(){Tt.aspect=window.innerWidth/window.innerHeight,Tt.updateProjectionMatrix(),yt.aspect=window.innerWidth/window.innerHeight,yt.updateProjectionMatrix(),vt.setSize(window.innerWidth,window.innerHeight),Dt(),wt.add(_t),wt.add(bt),wt.add(xt),It()}),!1),$(window).resize((function(){It()}));var Ot=(new e.Plane).setFromNormalAndCoplanarPoint(new e.Vector3(0,0,1),new le(0,0,1)),Nt=new e.Raycaster,Ct=new e.Vector2,Ht=new e.Vector3,Ut=new e.Vector2(.5,-.45,-1),Ft=document.getElementById("sitetitle"),kt=Ft.getBoundingClientRect();Ut=new e.Vector3(1/(.5*window.innerWidth)*1,19,-15);function Dt(){(Gt=jQuery("#bg")).height(jQuery(window).height()+100),Gt.width(jQuery(window).width()+500),kt=Ft.getBoundingClientRect(),console.log(kt.right/window.innerWidth),Ct.set(kt.right/window.innerWidth*2-1,kt.top+1),Nt.setFromCamera(Ct,yt),Nt.ray.intersectPlane(Ot,Ht),console.log("window inner width: ",window.innerWidth),window.innerWidth>2900?Ut.set(1/window.innerWidth*1e3-19.6,19,-15):window.innerWidth>2550?Ut.set(1/window.innerWidth*5e3-12,19,-15):window.innerWidth>2040?Ut.set(1/window.innerWidth*15e3-12,19,-15):window.innerWidth>1560?Ut.set(1/(.5*window.innerWidth)*1950,19,-15):window.innerWidth>650?Ut.set(1/window.innerWidth*12e3,19,-15):Ut.set(17,19,-15),Rt&&Ut.add(new e.Vector3(-1,-2.75,0)),window.innerHeight<700&&window.screen.availHeight>700?0==lt&&(lt=!0,wt.remove(_t),wt.remove(bt),wt.remove(xt)):1==lt&&(lt=!1,wt.add(_t),wt.add(bt),wt.add(xt)),_t.position.copy(Ht).add(Ut),xt.position.set(_t.position.x,_t.position.y,_t.position.z),bt.position.set(_t.position.x,_t.position.y,_t.position.z),console.log(_t.position)}new e.Vector3(-5,.3,-15),console.log("mobile offset: ");var Gt=jQuery("#bg");function jt(){const e=document.body.getBoundingClientRect().top;Tt.position.y=.027*e,yt.position.y=.027*e}document.body.onscroll=jt,jt(),function e(){requestAnimationFrame(e),window.innerWidth!=ut&&It(),_t.rotation.x+=.01,_t.rotation.y+=.005,_t.rotation.z+=.01,bt.rotation.set(_t.rotation.x+1.5,_t.rotation.y+1.5,_t.rotation.z+1.5),xt.rotation.x-=.01,xt.rotation.y-=.005,xt.rotation.z-=.01,ut=window.innerWidth,vt.render(wt,Tt)}();
